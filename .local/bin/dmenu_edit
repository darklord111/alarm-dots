#!/bin/sh
#
# dedit: Use dmenu to open and edit a file from a given list.

# Global variables:
FILES=${1:-"$HOME/.config/dmenu/edit-list"}

if [ -f $XDG_CONFIG_HOME/dmenu/dmenurc ]; then
  . $XDG_CONFIG_HOME/dmenu/dmenurc
else
  DMENU='dmenu -i'
fi

# Show list of options
choice=$(awk '{print $1}' $FILES | $DMENU -p "File to edit:")

if [[ $choice ]]; then
    # use eval as get vim error is use awk's system
    eval $(awk '/'$choice'/ && NF == 2 {printf("'$EDITOR' %s",$2); exit}
                /'$choice'/ && NF == 3 {printf("%s %s",$3,$2); exit}' $FILES)
fi


